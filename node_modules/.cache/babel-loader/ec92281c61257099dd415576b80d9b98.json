{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/Charu/Desktop/Project_Board-main/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Charu/Desktop/Project_Board-main/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\Charu\\\\Desktop\\\\Project_Board-main\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useEffect,useContext}from'react';import{NavLink,useNavigate}from'react-router-dom';import'../stylesheets/searchMembers.css';import'bootstrap/dist/css/bootstrap.min.css';import{Row,Col,Container,InputGroup,Button,Modal,FormControl,ListGroup,Badge}from'react-bootstrap';import image_S1 from'../images/abstract10.png';import{UserContext}from'../App';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var SearchMembers=function SearchMembers(_ref){var props=_ref.props;var _useContext=useContext(UserContext),state=_useContext.state,dispatch=_useContext.dispatch;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showAlert=_useState2[0],setShowAlert=_useState2[1];var handleAlertClose=function handleAlertClose(){setShowAlert(false);};var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),alertMessage=_useState4[0],setAlertMessage=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),alertTitle=_useState6[0],setAlertTitle=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),show=_useState8[0],setShow=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),searchInput=_useState10[0],setSearchInput=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),searchResult=_useState12[0],setSearchResult=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),allfriends=_useState14[0],setAllfriends=_useState14[1];var getFriends=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch('/getFriends',{method:'GET'});case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;console.log(data);setAllfriends(data);_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function getFriends(){return _ref2.apply(this,arguments);};}();useEffect(function(){getFriends();},[]);var handelChange=function handelChange(e){setSearchInput(e.target.value);// console.log(e.target.value)\n};var handleKeyDown=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var response,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(e.keyCode===13&&searchInput)){_context2.next=14;break;}_context2.prev=1;_context2.next=4;return fetch('/searchBar',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({searchInput:searchInput})});case 4:response=_context2.sent;_context2.next=7;return response.json();case 7:data=_context2.sent;if(response.status===201&&data.length>0){setSearchResult(data);}else{setAlertTitle(\"Alert\");setAlertMessage(\"No matches found.\");setShowAlert(true);}_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](1);console.log(_context2.t0);case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[1,11]]);}));return function handleKeyDown(_x){return _ref3.apply(this,arguments);};}();var handleSearchBtn=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var response,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return fetch('/searchBar',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({searchInput:searchInput})});case 3:response=_context3.sent;_context3.next=6;return response.json();case 6:data=_context3.sent;if(response.status===201&&data.length>0){setSearchResult(data);}else{setAlertTitle(\"Alert\");setAlertMessage(\"No matches found.\");setShowAlert(true);}_context3.next=13;break;case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 13:case\"end\":return _context3.stop();}}},_callee3,null,[[0,10]]);}));return function handleSearchBtn(){return _ref4.apply(this,arguments);};}();var compareIds=function compareIds(){var selfBtn=document.getElementById(state.id);if(selfBtn){selfBtn.textContent='Own Profile';selfBtn.disabled=true;}allfriends.map(function(element){var friendBtn=document.getElementById(element._id);if(friendBtn){friendBtn.textContent='Member Exist';friendBtn.disabled=true;}});};useEffect(function(){compareIds();},[searchResult]);var handleRequestBtn=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(e){var personId,response,data;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:personId=e.target.id;_context4.prev=1;_context4.next=4;return fetch('/sendingRequest',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({personId:personId})// body: searchInput\n});case 4:response=_context4.sent;_context4.next=7;return response.json();case 7:data=_context4.sent;if(response.status===201&&data){setAlertTitle(\"Alert\");setAlertMessage(data.message);setShowAlert(true);props.setFetchData(data);setShow(false);setSearchInput(\"\");setSearchResult([]);}else{setAlertTitle(\"Alert\");setAlertMessage(data.message);setShowAlert(true);}_context4.next=14;break;case 11:_context4.prev=11;_context4.t0=_context4[\"catch\"](1);console.log(_context4.t0);case 14:case\"end\":return _context4.stop();}}},_callee4,null,[[1,11]]);}));return function handleRequestBtn(_x2){return _ref5.apply(this,arguments);};}();var handleCoseModal=function handleCoseModal(){setShow(false);setSearchInput(\"\");setSearchResult([]);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(ListGroup.Item,{className:\"newProjectBtn\",onClick:function onClick(){return setShow(true);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-search\"}),' ',\"Find Members\"]}),/*#__PURE__*/_jsxs(Modal,{show:show,onHide:handleCoseModal,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,className:\"modalHeader\",children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Find Members\"})}),/*#__PURE__*/_jsxs(Modal.Body,{className:\"modalBody\",children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(InputGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(FormControl,{placeholder:\"Find Members\",type:\"text\",\"aria-label\":\"Recipient's username\",\"aria-describedby\":\"basic-addon2\",value:searchInput,className:\"formInput\",onChange:handelChange,onKeyDown:handleKeyDown}),/*#__PURE__*/_jsx(Button,{variant:\"outline-secondary\",className:\"searchBtn\",id:\"button-addon2\",onClick:handleSearchBtn,children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-search searchIcon\"})})]})})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(ListGroup,{as:\"ol\",variant:\"flush\",children:searchResult.map(function(searchResult,index){return/*#__PURE__*/_jsxs(ListGroup.Item,{as:\"li\",className:\"d-flex justify-content-between align-items-start memberLists\",children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(\"img\",{src:searchResult.image,onError:function onError(e){e.target.onError=null;e.target.src=image_S1;},className:\"profileImages\"}),/*#__PURE__*/_jsx(\"h5\",{children:searchResult.name})]})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Button,{id:searchResult._id,className:\"sendRequestBtn\",bg:\"primary\",onClick:handleRequestBtn,children:\"Send Request\"})})})]},index);})})})})]})]}),/*#__PURE__*/_jsxs(Modal,{size:\"sm\",show:showAlert,onHide:handleAlertClose,backdrop:\"static\",keyboard:false,\"aria-labelledby\":\"example-modal-sizes-title-sm\",children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,className:\"modalHeader\",children:/*#__PURE__*/_jsx(Modal.Title,{id:\"example-modal-sizes-title-sm\",children:alertTitle})}),/*#__PURE__*/_jsx(Modal.Body,{className:\"modalBodyStatic\",children:/*#__PURE__*/_jsx(\"p\",{children:alertMessage})}),/*#__PURE__*/_jsx(Modal.Footer,{className:\"modalFooter\",children:/*#__PURE__*/_jsx(Button,{className:\"saveBtn\",onClick:handleAlertClose,children:\"Ok\"})})]})]});};export default SearchMembers;","map":{"version":3,"sources":["C:/Users/Charu/Desktop/Project_Board-main/frontend/src/components/SearchMembers.js"],"names":["React","useState","useEffect","useContext","NavLink","useNavigate","Row","Col","Container","InputGroup","Button","Modal","FormControl","ListGroup","Badge","image_S1","UserContext","SearchMembers","props","state","dispatch","showAlert","setShowAlert","handleAlertClose","alertMessage","setAlertMessage","alertTitle","setAlertTitle","show","setShow","searchInput","setSearchInput","searchResult","setSearchResult","allfriends","setAllfriends","getFriends","fetch","method","response","json","data","console","log","handelChange","e","target","value","handleKeyDown","keyCode","headers","body","JSON","stringify","status","length","handleSearchBtn","compareIds","selfBtn","document","getElementById","id","textContent","disabled","map","element","friendBtn","_id","handleRequestBtn","personId","message","setFetchData","handleCoseModal","index","image","onError","src","name"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useContext} from 'react'\nimport { NavLink, useNavigate } from 'react-router-dom'\nimport '../stylesheets/searchMembers.css'\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { Row, Col, Container, InputGroup, Button, Modal, FormControl, ListGroup, Badge } from 'react-bootstrap';\nimport image_S1 from '../images/abstract10.png'\nimport { UserContext } from '../App'\n\nconst SearchMembers = ({props}) => {\n    const {state, dispatch} = useContext(UserContext);  \n    const [showAlert, setShowAlert] = useState(false);\n    const handleAlertClose = () =>{setShowAlert(false);}\n    const [alertMessage, setAlertMessage] = useState(\"\");\n    const [alertTitle, setAlertTitle] = useState(\"\");\n    const [show, setShow] = useState(false);\n    const [searchInput, setSearchInput] = useState('');\n    const [searchResult, setSearchResult] = useState([]);\n    const [allfriends, setAllfriends] = useState([]);\n\n    \n    \n    const getFriends = async () =>{\n        try {\n            const response = await fetch('/getFriends', {\n                method: 'GET',\n            })\n\n            const data = await response.json();\n            console.log(data)\n            setAllfriends(data);\n\n        } catch (error) {\n            console.log(error)\n        }\n\n    }\n\n    useEffect(() => {\n        getFriends();\n    },[])\n\n\n    const handelChange = (e) =>{\n        setSearchInput(e.target.value)\n        // console.log(e.target.value)\n    }\n\n    const handleKeyDown = async (e) =>{\n        \n\n        if(e.keyCode === 13 && searchInput){\n\n            try {\n                const response = await fetch('/searchBar', {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type' : 'application/json' \n                    },\n                    body: JSON.stringify({searchInput}),\n                })\n                \n                let data = await response.json();\n                if(response.status === 201 && data.length > 0){\n                    setSearchResult(data);\n                } \n                else{\n                    setAlertTitle(\"Alert\");\n                    setAlertMessage(\"No matches found.\");\n                    setShowAlert(true);\n                }             \n                \n            } catch (error) {\n                console.log(error);\n            }\n            \n        }\n\n    }\n\n    const handleSearchBtn = async () =>{\n        \n        try {\n            const response = await fetch('/searchBar', {\n                method: 'POST',\n                headers: {\n                    'Content-Type' : 'application/json' \n                },\n                body: JSON.stringify({searchInput}),\n            })\n            \n            let data = await response.json();\n            if(response.status === 201 && data.length > 0){\n                setSearchResult(data);\n            } \n            else{\n                setAlertTitle(\"Alert\");\n                setAlertMessage(\"No matches found.\");\n                setShowAlert(true);\n            } \n        } catch (error) {\n            console.log(error);\n        }\n        \n    }\n\n\n    const compareIds = () =>{\n        let selfBtn = document.getElementById(state.id)\n        \n        if(selfBtn){\n            selfBtn.textContent = 'Own Profile';\n            selfBtn.disabled = true;\n        }\n\n        allfriends.map((element)=>{\n            let friendBtn = document.getElementById(element._id)\n            if(friendBtn){\n                friendBtn.textContent = 'Member Exist';\n                friendBtn.disabled = true;\n            }\n        })\n    }\n\n    useEffect(()=>{\n        compareIds();\n    },[searchResult])\n   \n\n    const handleRequestBtn = async (e) =>{\n        let personId = e.target.id;        \n       \n        try {\n            const response = await fetch('/sendingRequest', {\n                method: 'POST',\n                headers: {\n                    'Content-Type' : 'application/json' \n                }, \n                body: JSON.stringify({personId}),\n                // body: searchInput\n            })\n            \n    \n            let data = await response.json();\n    \n            if(response.status === 201 && data){\n                setAlertTitle(\"Alert\");\n                setAlertMessage(data.message);\n                setShowAlert(true); \n                props.setFetchData(data);\n                setShow(false);\n                setSearchInput(\"\");\n                setSearchResult([]);\n            }\n            else{\n                setAlertTitle(\"Alert\");\n                setAlertMessage(data.message);\n                setShowAlert(true); \n            }\n            \n        } catch (error) {\n            console.log(error)\n        }\n\n    }\n\n\n\n    const handleCoseModal = () =>{\n        setShow(false);\n        setSearchInput(\"\");\n        setSearchResult([]);\n    }\n \n  return (\n    <>\n\n        <ListGroup.Item className='newProjectBtn' onClick={() => setShow(true)}>    \n            <i className='fa fa-search'></i>\n            {' '}\n            Find Members      \n        </ListGroup.Item>\n\n        <Modal show={show} onHide={handleCoseModal}>\n            <Modal.Header closeButton className='modalHeader'>\n                <Modal.Title>Find Members</Modal.Title>\n            </Modal.Header>\n            <Modal.Body className='modalBody'>\n                <Row>    \n                    <Col>\n                        <InputGroup className=\"mb-3\">\n                        <FormControl\n                            placeholder=\"Find Members\"\n                            type=\"text\"\n                            aria-label=\"Recipient's username\"\n                            aria-describedby=\"basic-addon2\"\n                            value={searchInput}\n                            className='formInput'\n                            onChange={handelChange}\n                            onKeyDown={handleKeyDown}\n                        />\n                        <Button variant=\"outline-secondary\" className='searchBtn' id=\"button-addon2\" onClick={handleSearchBtn}>\n                            <i className=\"fa fa-search searchIcon\"></i>\n                        </Button>\n                        </InputGroup>\n                    </Col>\n                </Row>\n\n                <Row>\n                <Col>\n                  <ListGroup as=\"ol\" variant=\"flush\" >\n                    {searchResult.map( (searchResult, index) =>\n                      <ListGroup.Item as=\"li\" key={index}  className=\"d-flex justify-content-between align-items-start memberLists\">\n                        <Row>\n                            <Col>\n                                <img src={searchResult.image}\n                                    onError={(e)=>{e.target.onError = null; e.target.src = image_S1}}\n                                    className=\"profileImages\"\n                                />\n                                <h5>{searchResult.name}</h5>\n                            </Col>\n                        </Row>\n                        <Row>\n                            <Col>\n                                <Button id={searchResult._id} className='sendRequestBtn'  bg=\"primary\" onClick={handleRequestBtn}>\n                                    Send Request\n                                </Button>\n                            </Col>\n                        </Row>\n                    </ListGroup.Item>\n                    )}\n                  </ListGroup>\n                </Col>\n              </Row>\n            </Modal.Body>\n        </Modal>\n            \n\n\n\n\n            {/* Alert Modal */}\n\n            <Modal size=\"sm\" show={showAlert} onHide={handleAlertClose} backdrop=\"static\" keyboard={false} aria-labelledby=\"example-modal-sizes-title-sm\">\n            <Modal.Header closeButton className='modalHeader'>\n                <Modal.Title id=\"example-modal-sizes-title-sm\">{alertTitle}</Modal.Title>\n            </Modal.Header>\n            <Modal.Body className='modalBodyStatic'>\n                <p>{alertMessage}</p>\n            </Modal.Body>\n            <Modal.Footer className='modalFooter'>\n                <Button className='saveBtn' onClick={handleAlertClose}>Ok</Button> \n            </Modal.Footer>\n            </Modal>\n        \n           \n        \n    </>\n  )\n}\n\nexport default SearchMembers"]},"metadata":{},"sourceType":"module"}